<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1904px" preserveAspectRatio="none" style="width:568px;height:1904px;" version="1.1" viewBox="0 0 568 1904" width="568px" zoomAndPan="magnify"><defs><filter height="300%" id="f8qqr3kgx9bvt" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="215" x="172.25" y="23.5352">searchROMBitCheck sequence</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="1768.3926" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="155" y="105.7988"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="186.1094"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="258.4199"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="937.1836"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1085.3809"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1257.8887"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1406.0859"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1478.3965"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1596.0176"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1803.8809"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="1552.4609" style="stroke: #000000; stroke-width: 2.0;" width="410.5" x="37.5" y="308.7305"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="17.3105" style="stroke: #000000; stroke-width: 2.0;" width="219" x="97.5" y="437.2832"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="1281.3555" style="stroke: #000000; stroke-width: 2.0;" width="390.5" x="47.5" y="572.8359"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="937.9395" style="stroke: #000000; stroke-width: 2.0;" width="370.5" x="57.5" y="701.3887"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="698.7656" style="stroke: #000000; stroke-width: 2.0;" width="350.5" x="67.5" y="829.9414"/><rect fill="#FFFFFF" height="148.1973" style="stroke: none; stroke-width: 1.0;" width="350.5" x="67.5" y="980.4941"/><rect fill="#FFFFFF" height="400.0156" style="stroke: none; stroke-width: 1.0;" width="350.5" x="67.5" y="1128.6914"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="371.0605" style="stroke: #000000; stroke-width: 2.0;" width="330.5" x="77.5" y="1150.6465"/><rect fill="#FFFFFF" height="220.5078" style="stroke: none; stroke-width: 1.0;" width="330.5" x="77.5" y="1301.1992"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="17.3105" style="stroke: #000000; stroke-width: 2.0;" width="276" x="97.5" y="1542.707"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="150.5527" style="stroke: #000000; stroke-width: 2.0;" width="275" x="77.5" y="1696.6387"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="159.5" x2="159.5" y1="74.4883" y2="1892.1914"/><a target="_top" xlink:actuate="onRequest" xlink:href="../Class/OneWireDriver.svg" xlink:show="new" xlink:title="../Class/OneWireDriver.svg" xlink:type="simple"><rect fill="#FEFECE" filter="url(#f8qqr3kgx9bvt)" height="36" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="87.5" y="33.4883"/><ellipse cx="105.5" cy="51.4883" fill="#008000" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M101.2139,45.0952 L104.1357,45.0952 L105.6133,50.5322 L107.0825,45.0952 L110.021,45.0952 L110.021,57.4883 L107.9126,57.4883 L107.9126,47.5605 L106.6011,52.981 L104.6504,52.981 L103.3223,47.5605 L103.3223,57.4883 L101.2139,57.4883 Z "/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="99" x="122.5" y="54.4883">OneWireDriver</text></a><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="1768.3926" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="155" y="105.7988"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="186.1094"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="258.4199"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="937.1836"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1085.3809"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1257.8887"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1406.0859"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1478.3965"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1596.0176"/><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="28" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="160" y="1803.8809"/><polygon fill="#A80036" points="143,101.7988,153,105.7988,143,109.7988,147,105.7988" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="3" x2="149" y1="105.7988" y2="105.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="133" x="10" y="101.0566">searchROMBitCheck()</text><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="553.5" x="3" y="134.4541"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="134.4541" y2="134.4541"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="137.4541" y2="137.4541"/><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="138" x="210.75" y="123.7988"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="124" x="216.75" y="140.3672">Initialize variables</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="178.4199" y2="178.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="178.4199" y2="191.4199"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="191.4199" y2="191.4199"/><polygon fill="#A80036" points="181,187.4199,171,191.4199,181,195.4199,177,191.4199" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="333" x="177" y="173.6777">bitState[ROMCODE_BIT_LENGTH] = {NOT_SEARCHED}</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="250.7305" y2="250.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="250.7305" y2="263.7305"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="263.7305" y2="263.7305"/><polygon fill="#A80036" points="181,259.7305,171,263.7305,181,267.7305,177,263.7305" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="241" x="177" y="245.9883">bitArray[ROMCODE_BIT_LENGTH] = {0}</text><path d="M37.5,308.7305 L111.5,308.7305 L111.5,315.7305 L101.5,325.7305 L37.5,325.7305 L37.5,308.7305 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1552.4609" style="stroke: #000000; stroke-width: 2.0;" width="410.5" x="37.5" y="308.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="52.5" y="322.2988">loop</text><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="553.5" x="3" y="346.6963"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="346.6963" y2="346.6963"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="349.6963" y2="349.6963"/><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="202" x="178.75" y="336.041"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="184.75" y="352.6094">Check if the search finished</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="189" x="84.5" y="369.3516"/><polygon fill="#EEEEEE" points="84.5,369.3516,148.5,369.3516,148.5,376.3516,138.5,386.3516,84.5,386.3516,84.5,369.3516" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="383.9199">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="90.5" y="402.9199">isAllPatternFinished(bitState)</text><a target="_top" xlink:actuate="onRequest" xlink:href="./isAllPatternFinished.svg" xlink:show="new" xlink:title="./isAllPatternFinished.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="162" x="90.5" y="418.2305">./isAllPatternFinished.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="90.5" x2="252.5" y1="420.2305" y2="420.2305"/></a><path d="M97.5,437.2832 L181.5,437.2832 L181.5,444.2832 L171.5,454.2832 L97.5,454.2832 L97.5,437.2832 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.3105" style="stroke: #000000; stroke-width: 2.0;" width="219" x="97.5" y="437.2832"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="112.5" y="450.8516">break</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="196.5" y="449.918">[all pattern finished]</text><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="553.5" x="3" y="482.249"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="482.249" y2="482.249"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="485.249" y2="485.249"/><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="87" x="236.25" y="471.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="73" x="242.25" y="488.1621">ResetPulse</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="147" x="84.5" y="504.9043"/><polygon fill="#EEEEEE" points="84.5,504.9043,148.5,504.9043,148.5,511.9043,138.5,521.9043,84.5,521.9043,84.5,504.9043" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="519.4727">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="95.5" y="538.4727">result = ResetPulse()</text><a target="_top" xlink:actuate="onRequest" xlink:href="./ResetPulse.svg" xlink:show="new" xlink:title="./ResetPulse.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="104" x="95.5" y="553.7832">./ResetPulse.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="95.5" x2="199.5" y1="555.7832" y2="555.7832"/></a><path d="M47.5,572.8359 L114.5,572.8359 L114.5,579.8359 L104.5,589.8359 L47.5,589.8359 L47.5,572.8359 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="1281.3555" style="stroke: #000000; stroke-width: 2.0;" width="390.5" x="47.5" y="572.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="62.5" y="586.4043">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="129.5" y="585.4707">[result[ONE_WIRE_SUCCESS]]</text><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="553.5" x="3" y="610.8018"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="610.8018" y2="610.8018"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="613.8018" y2="613.8018"/><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="160" x="199.75" y="600.1465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="146" x="205.75" y="616.7148">SearchROMCommand</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="203" x="84.5" y="633.457"/><polygon fill="#EEEEEE" points="84.5,633.457,148.5,633.457,148.5,640.457,138.5,650.457,84.5,650.457,84.5,633.457" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="648.0254">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="195" x="90.5" y="667.0254">WriteByte(CODE_SEARCH_ROM)</text><a target="_top" xlink:actuate="onRequest" xlink:href="./WriteByte.svg" xlink:show="new" xlink:title="./WriteByte.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="95" x="90.5" y="682.3359">./WriteByte.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="90.5" x2="185.5" y1="684.3359" y2="684.3359"/></a><path d="M57.5,701.3887 L131.5,701.3887 L131.5,708.3887 L121.5,718.3887 L57.5,718.3887 L57.5,701.3887 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="937.9395" style="stroke: #000000; stroke-width: 2.0;" width="370.5" x="57.5" y="701.3887"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="29" x="72.5" y="714.957">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="146.5" y="714.0234">[cnt[0:ROMCODE_BIT_LENGTH]]</text><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="553.5" x="3" y="739.3545"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="739.3545" y2="739.3545"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="742.3545" y2="742.3545"/><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="181" x="189.25" y="728.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="167" x="195.25" y="745.2676">Binary Search of Each bit</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="251" x="84.5" y="762.0098"/><polygon fill="#EEEEEE" points="84.5,762.0098,148.5,762.0098,148.5,769.0098,138.5,779.0098,84.5,779.0098,84.5,762.0098" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="776.5781">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="90.5" y="795.5781">currentBitState = searchROMBitCheck()</text><a target="_top" xlink:actuate="onRequest" xlink:href="./searchROMBitCheck.svg" xlink:show="new" xlink:title="./searchROMBitCheck.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="162" x="90.5" y="810.8887">./searchROMBitCheck.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="90.5" x2="252.5" y1="812.8887" y2="812.8887"/></a><path d="M67.5,829.9414 L134.5,829.9414 L134.5,836.9414 L124.5,846.9414 L67.5,846.9414 L67.5,829.9414 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="698.7656" style="stroke: #000000; stroke-width: 2.0;" width="350.5" x="67.5" y="829.9414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="82.5" y="843.5098">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="149.5" y="842.5762">[currentBitState[ONLY_0_EXIST]]</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="147" x="84.5" y="847.252"/><polygon fill="#EEEEEE" points="84.5,847.252,148.5,847.252,148.5,854.252,138.5,864.252,84.5,864.252,84.5,847.252" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="861.8203">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="122" y="880.8203">write0()</text><a target="_top" xlink:actuate="onRequest" xlink:href="./write0.svg" xlink:show="new" xlink:title="./write0.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="76" x="122" y="896.1309">./write0.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="122" x2="198" y1="898.1309" y2="898.1309"/></a><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="929.4941" y2="929.4941"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="929.4941" y2="942.4941"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="942.4941" y2="942.4941"/><polygon fill="#A80036" points="181,938.4941,171,942.4941,181,946.4941,177,942.4941" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="177" y="924.752">bitArray[cnt] = 0</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="67.5" x2="418" y1="981.4941" y2="981.4941"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="179" x="72.5" y="992.1289">[currentBitState[ONLY_1_EXIST]]</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="147" x="84.5" y="995.4492"/><polygon fill="#EEEEEE" points="84.5,995.4492,148.5,995.4492,148.5,1002.4492,138.5,1012.4492,84.5,1012.4492,84.5,995.4492" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="1010.0176">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="122" y="1029.0176">write1()</text><a target="_top" xlink:actuate="onRequest" xlink:href="./write1.svg" xlink:show="new" xlink:title="./write1.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="76" x="122" y="1044.3281">./write1.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="122" x2="198" y1="1046.3281" y2="1046.3281"/></a><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="1077.6914" y2="1077.6914"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="1077.6914" y2="1090.6914"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="1090.6914" y2="1090.6914"/><polygon fill="#A80036" points="181,1086.6914,171,1090.6914,181,1094.6914,177,1090.6914" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="177" y="1072.9492">bitArray[cnt] = 1</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="67.5" x2="418" y1="1129.6914" y2="1129.6914"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="72.5" y="1140.3262">[currentBitState[BOTH_EXISTS]]</text><path d="M77.5,1150.6465 L144.5,1150.6465 L144.5,1157.6465 L134.5,1167.6465 L77.5,1167.6465 L77.5,1150.6465 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="371.0605" style="stroke: #000000; stroke-width: 2.0;" width="330.5" x="77.5" y="1150.6465"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="92.5" y="1164.2148">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="159.5" y="1163.2813">[bitState[cnt] = NOT_SEARCHED]</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="147" x="84.5" y="1167.957"/><polygon fill="#EEEEEE" points="84.5,1167.957,148.5,1167.957,148.5,1174.957,138.5,1184.957,84.5,1184.957,84.5,1167.957" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="1182.5254">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="122" y="1201.5254">write0()</text><a target="_top" xlink:actuate="onRequest" xlink:href="./write0.svg" xlink:show="new" xlink:title="./write0.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="76" x="122" y="1216.8359">./write0.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="122" x2="198" y1="1218.8359" y2="1218.8359"/></a><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="1250.1992" y2="1250.1992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="1250.1992" y2="1263.1992"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="1263.1992" y2="1263.1992"/><polygon fill="#A80036" points="181,1259.1992,171,1263.1992,181,1267.1992,177,1263.1992" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="177" y="1245.457">bitArray[cnt] = 0</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="77.5" x2="408" y1="1302.1992" y2="1302.1992"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="195" x="82.5" y="1312.834">[bitState[cnt] != BOTH_SEARCHED]</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="147" x="84.5" y="1316.1543"/><polygon fill="#EEEEEE" points="84.5,1316.1543,148.5,1316.1543,148.5,1323.1543,138.5,1333.1543,84.5,1333.1543,84.5,1316.1543" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="1330.7227">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="47" x="122" y="1349.7227">write1()</text><a target="_top" xlink:actuate="onRequest" xlink:href="./write1.svg" xlink:show="new" xlink:title="./write1.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="76" x="122" y="1365.0332">./write1.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="122" x2="198" y1="1367.0332" y2="1367.0332"/></a><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="1398.3965" y2="1398.3965"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="1398.3965" y2="1411.3965"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="1411.3965" y2="1411.3965"/><polygon fill="#A80036" points="181,1407.3965,171,1411.3965,181,1415.3965,177,1411.3965" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="177" y="1393.6543">bitArray[cnt] = 1</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="1470.707" y2="1470.707"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="1470.707" y2="1483.707"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="1483.707" y2="1483.707"/><polygon fill="#A80036" points="181,1479.707,171,1483.707,181,1487.707,177,1483.707" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="177" y="1465.9648">currentBitState = BOTH_SEARCHED</text><path d="M97.5,1542.707 L181.5,1542.707 L181.5,1549.707 L171.5,1559.707 L97.5,1559.707 L97.5,1542.707 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="17.3105" style="stroke: #000000; stroke-width: 2.0;" width="276" x="97.5" y="1542.707"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="112.5" y="1556.2754">break</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="172" x="196.5" y="1555.3418">[currentBitState = NO_DEVICE]</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="1588.3281" y2="1588.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="1588.3281" y2="1601.3281"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="1601.3281" y2="1601.3281"/><polygon fill="#A80036" points="181,1597.3281,171,1601.3281,181,1605.3281,177,1601.3281" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="177" y="1583.5859">bitState[cnt] = currentBitState</text><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="553.5" x="3" y="1666.9834"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="1666.9834" y2="1666.9834"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="556.5" y1="1669.9834" y2="1669.9834"/><rect fill="#EEEEEE" filter="url(#f8qqr3kgx9bvt)" height="23.3105" style="stroke: #000000; stroke-width: 2.0;" width="188" x="185.75" y="1656.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="174" x="191.75" y="1672.8965">Store the found ROMCode</text><path d="M77.5,1696.6387 L144.5,1696.6387 L144.5,1703.6387 L134.5,1713.6387 L77.5,1713.6387 L77.5,1696.6387 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="150.5527" style="stroke: #000000; stroke-width: 2.0;" width="275" x="77.5" y="1696.6387"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="22" x="92.5" y="1710.207">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="188" x="159.5" y="1709.2734">[cnt &gt;= ROMCODE_BIT_LENGTH]</text><rect fill="#FFFFFF" filter="url(#f8qqr3kgx9bvt)" height="55.9316" style="stroke: #000000; stroke-width: 2.0;" width="466" x="84.5" y="1713.9492"/><polygon fill="#EEEEEE" points="84.5,1713.9492,148.5,1713.9492,148.5,1720.9492,138.5,1730.9492,84.5,1730.9492,84.5,1713.9492" style="stroke: #000000; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="97.5" y="1728.5176">ref</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="458" x="90.5" y="1747.5176">foundROMCode[numOfDeviceFound] = createROMStructFromBit(bitArray)</text><a target="_top" xlink:actuate="onRequest" xlink:href="./createROMStructFromBit.svg" xlink:show="new" xlink:title="./createROMStructFromBit.svg" xlink:type="simple"><text fill="#0000FF" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" text-decoration="underline" textLength="189" x="90.5" y="1762.8281">./createROMStructFromBit.svg</text><line style="stroke: #0000FF; stroke-width: 1.0;" x1="90.5" x2="279.5" y1="1764.8281" y2="1764.8281"/></a><line style="stroke: #A80036; stroke-width: 1.0;" x1="170" x2="212" y1="1796.1914" y2="1796.1914"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="212" x2="212" y1="1796.1914" y2="1809.1914"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="171" x2="212" y1="1809.1914" y2="1809.1914"/><polygon fill="#A80036" points="181,1805.1914,171,1809.1914,181,1813.1914,177,1809.1914" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="177" y="1791.4492">numOfDeviceFound++</text><polygon fill="#A80036" points="14,1870.1914,4,1874.1914,14,1878.1914,10,1874.1914" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="8" x2="159" y1="1874.1914" y2="1874.1914"/><!--
@startuml

hide footbox

title searchROMBitCheck sequence

participant "OneWireDriver" as ModuleOneWireDriver<<M,Green>>[[../Class/OneWireDriver.svg]]


-> ModuleOneWireDriver : searchROMBitCheck()
  activate ModuleOneWireDriver

==Initialize variables==
ModuleOneWireDriver -> ModuleOneWireDriver : bitState[ROMCODE_BIT_LENGTH] = {NOT_SEARCHED}
  activate ModuleOneWireDriver
  deactivate ModuleOneWireDriver

ModuleOneWireDriver -> ModuleOneWireDriver : bitArray[ROMCODE_BIT_LENGTH] = {0}
  activate ModuleOneWireDriver
  deactivate ModuleOneWireDriver

loop
==Check if the search finished==
  ref over ModuleOneWireDriver
    isAllPatternFinished(bitState)
    [[./isAllPatternFinished.svg]]
  end ref

  break all pattern finished
  end

==ResetPulse==
  ref over ModuleOneWireDriver
    result = ResetPulse()
    [[./ResetPulse.svg]]
  end ref

  opt result[ONE_WIRE_SUCCESS]
  ==SearchROMCommand==
    ref over ModuleOneWireDriver
      WriteByte(CODE_SEARCH_ROM)
      [[./WriteByte.svg]]
    end ref

    loop cnt[0:ROMCODE_BIT_LENGTH]
    ==Binary Search of Each bit==
      ref over ModuleOneWireDriver
        currentBitState = searchROMBitCheck()
        [[./searchROMBitCheck.svg]]
      end ref

      opt currentBitState[ONLY_0_EXIST]
        ref over ModuleOneWireDriver
          write0()
          [[./write0.svg]]
        end ref
        ModuleOneWireDriver -> ModuleOneWireDriver : bitArray[cnt] = 0
          activate ModuleOneWireDriver
          deactivate ModuleOneWireDriver
      else currentBitState[ONLY_1_EXIST]
        ref over ModuleOneWireDriver
          write1()
          [[./write1.svg]]
        end ref
        ModuleOneWireDriver -> ModuleOneWireDriver : bitArray[cnt] = 1
          activate ModuleOneWireDriver
          deactivate ModuleOneWireDriver
      else currentBitState[BOTH_EXISTS]
        opt bitState[cnt] = NOT_SEARCHED
          ref over ModuleOneWireDriver
            write0()
            [[./write0.svg]]
          end ref
          ModuleOneWireDriver -> ModuleOneWireDriver : bitArray[cnt] = 0
            activate ModuleOneWireDriver
            deactivate ModuleOneWireDriver
        else bitState[cnt] != BOTH_SEARCHED
          ref over ModuleOneWireDriver
            write1()
            [[./write1.svg]]
          end ref
          ModuleOneWireDriver -> ModuleOneWireDriver : bitArray[cnt] = 1
            activate ModuleOneWireDriver
            deactivate ModuleOneWireDriver
          ModuleOneWireDriver -> ModuleOneWireDriver : currentBitState = BOTH_SEARCHED
            activate ModuleOneWireDriver
            deactivate ModuleOneWireDriver
        end
      end

      break currentBitState = NO_DEVICE
      end

      ModuleOneWireDriver -> ModuleOneWireDriver : bitState[cnt] = currentBitState
        activate ModuleOneWireDriver
        deactivate ModuleOneWireDriver
    end

==Store the found ROMCode==
    opt cnt >= ROMCODE_BIT_LENGTH
      ref over ModuleOneWireDriver
        foundROMCode[numOfDeviceFound] = createROMStructFromBit(bitArray)
        [[./createROMStructFromBit.svg]]
      end ref
      ModuleOneWireDriver -> ModuleOneWireDriver : numOfDeviceFound++
        activate ModuleOneWireDriver
        deactivate ModuleOneWireDriver
    end
  end
end
<- - ModuleOneWireDriver
  deactivate ModuleOneWireDriver

@enduml

PlantUML version 1.2018.09(Sat Jul 28 01:58:18 JST 2018)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 9.0.1+11
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: ja
Country: JP
--></g></svg>